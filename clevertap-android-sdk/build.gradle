buildscript {
    repositories {
        google()
        jcenter()
    }
    dependencies {
        classpath 'com.android.tools.build:gradle:3.3.1'
        classpath 'com.github.dcendents:android-maven-gradle-plugin:2.1'
        classpath 'com.jfrog.bintray.gradle:gradle-bintray-plugin:1.7.3'
        classpath 'com.google.gms:google-services:4.2.0'
    }
}

repositories {
    google()
    jcenter()
}

def getBuildNumber() {
    return System.getenv("BUILD_NUMBER") as Integer ?: 0
}
//com.clevertap.android:clevertap-android-sdk:3.4.2
ext {
    publishGroupId = 'com.clevertap.android.mx'
    publishVersion = "3.5.1.${getBuildNumber()}"
    publishVersionCode = 351
    publishUrlSnapshot = 'http://mx.git.com:8098/nexus/content/repositories/snapshots/'
    publishUrlRelease = 'http://mx.git.com:8098/nexus/content/repositories/releases/'
    publishScript = 'https://raw.githubusercontent.com/ZenMX/mavenPublisher/master/publish.gradle'
//    publishScript = './publish.gradle'

//    bintrayRepo = 'Maven'
//    bintrayName = 'CleverTapAndroidSDK'
//    org = 'clevertap'
//
//    publishedGroupId = 'com.clevertap.android'
//    libraryName = 'CleverTapAndroidSDK'
//    artifact = 'clevertap-android-sdk'
//    libraryDescription = 'The CleverTap Android SDK'
//
//    siteUrl = 'https://github.com/CleverTap/clevertap-android-sdk'
//    gitUrl = 'https://github.com/CleverTap/clevertap-android-sdk.git'
//
//    libraryVersion = '3.5.1'
//
//    developerId = 'clevertap'
//    developerName = 'CleverTap'
//    developerEmail = 'support@clevertap.com'
//
//    licenseName = 'The Apache Software License, Version 2.0'
//    licenseUrl = 'http://www.apache.org/licenses/LICENSE-2.0.txt'
//    allLicenses = ["Apache-2.0"]
}

//version = libraryVersion
//group = publishedGroupId

apply plugin: 'com.android.library'
apply plugin: 'com.github.dcendents.android-maven'
apply plugin: 'com.jfrog.bintray'

android {
    compileSdkVersion 28
    buildToolsVersion '28.0.3'
    defaultConfig {
        minSdkVersion 14
        targetSdkVersion 28
    }

    buildTypes {
        debug {
            buildConfigField "String", "SDK_VERSION_STRING", '"!SDK-VERSION-STRING!:com.clevertap.android:clevertap-android-sdk:3.5.1.0"'
        }

        release {
            buildConfigField "String", "SDK_VERSION_STRING", '"!SDK-VERSION-STRING!:com.clevertap.android:clevertap-android-sdk:3.5.1.0"'
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
        }
    }

    lintOptions {
        abortOnError false
    }
}

dependencies {
    compileOnly files('libs/play-services-base-9.8.0.jar')
    compileOnly files('libs/play-services-basement-9.8.0.jar')
    compileOnly files('libs/play-services-gcm-9.8.0.jar')
    compileOnly files('libs/play-services-iid-9.8.0.jar')
    compileOnly files('libs/play-services-plus-9.8.0.jar')
    compileOnly files('libs/firebase-messaging-9.8.0.jar')
    compileOnly files('libs/firebase-iid-9.8.0.jar')
    compileOnly 'com.android.support:support-v4:28.0.0'
    compileOnly 'com.google.android.exoplayer:exoplayer:2.8.4'
    compileOnly 'com.google.android.exoplayer:exoplayer-hls:2.8.4'
    compileOnly 'com.google.android.exoplayer:exoplayer-ui:2.8.4'
    implementation 'com.android.support:appcompat-v7:28.0.0'
    compileOnly 'com.android.support:design:28.0.0'
    compileOnly 'com.github.bumptech.glide:glide:4.9.0'

}

apply from: "${publishScript}"