buildscript {
    repositories {
        google()
        jcenter()
    }
    dependencies {
        classpath 'com.android.tools.build:gradle:3.3.0'
        classpath 'com.google.gms:google-services:4.2.0'
    }
}

repositories {
    google()
    jcenter()
}

def getBuildNumber() {
    return System.getenv("BUILD_NUMBER") as Integer ?: 0
}
//com.clevertap.android:clevertap-android-sdk:3.4.2
ext {

    publishGroupId = 'com.clevertap.android.mx'
    publishVersion = "3.4.2.${getBuildNumber()}"
    publishVersionCode = 342
    publishUrlSnapshot = 'http://mx.git.com:8098/nexus/content/repositories/snapshots/'
    publishUrlRelease = 'http://mx.git.com:8098/nexus/content/repositories/releases/'
    publishScript = 'https://raw.githubusercontent.com/ZenMX/mavenPublisher/master/publish.gradle'
//    publishScript = './publish.gradle'
}

apply plugin: 'com.android.library'

android {
    compileSdkVersion 28
    buildToolsVersion '28.0.3'
    defaultConfig {
        minSdkVersion 14
        targetSdkVersion 28
    }

    buildTypes {
        debug {
            buildConfigField "String", "SDK_VERSION_STRING", '"!SDK-VERSION-STRING!:com.clevertap.android:clevertap-android-sdk:3.4.2.0"'
        }

        release {
            buildConfigField "String", "SDK_VERSION_STRING", '"!SDK-VERSION-STRING!:com.clevertap.android:clevertap-android-sdk:3.4.2.0"'
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
        }
    }

    lintOptions {
        abortOnError false
    }
}

dependencies {
    compileOnly files('libs/play-services-base-9.8.0.jar')
    compileOnly files('libs/play-services-basement-9.8.0.jar')
    compileOnly files('libs/play-services-gcm-9.8.0.jar')
    compileOnly files('libs/play-services-iid-9.8.0.jar')
    compileOnly files('libs/play-services-plus-9.8.0.jar')
    compileOnly files('libs/firebase-messaging-9.8.0.jar')
    compileOnly files('libs/firebase-iid-9.8.0.jar')
    compileOnly 'com.android.support:support-v4:28.0.0'
    compileOnly 'com.google.android.exoplayer:exoplayer:2.8.4'
    compileOnly 'com.google.android.exoplayer:exoplayer-hls:2.8.4'
    compileOnly 'com.google.android.exoplayer:exoplayer-ui:2.8.4'
    implementation 'com.android.support:appcompat-v7:28.0.0'
    compileOnly 'com.android.support:design:28.0.0'
    compileOnly 'com.github.bumptech.glide:glide:4.8.0'

}

apply from: "${publishScript}"